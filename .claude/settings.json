{
  "hooks": {
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "if echo \"$PROMPT\" | grep -qiE '(implement|add|update|create|build|develop|write|feature|functionality)'; then echo '\n‚ö†Ô∏è  TDD Reminder: This appears to be a feature implementation request. Remember to write tests FIRST following the Red-Green-Refactor cycle:\n1. RED: Write a failing test\n2. GREEN: Write minimal code to pass\n3. REFACTOR: Improve while keeping tests green\n\nStart with domain tests, then use cases, then infrastructure, and finally the interface layer.'; fi"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "if git diff --name-only | grep -qE '\\.(ex|exs)$'; then echo '\n‚ú® Refactoring Checklist - Review your changes against these principles:\n\nüìã SOLID Principles:\n  ‚Ä¢ Single Responsibility: Does each module have one reason to change?\n  ‚Ä¢ Open/Closed: Can behavior be extended without modification?\n  ‚Ä¢ Liskov Substitution: Are behavior implementations substitutable?\n  ‚Ä¢ Interface Segregation: Are APIs focused and minimal?\n  ‚Ä¢ Dependency Inversion: Depending on abstractions, not concretions?\n\nüèóÔ∏è  Clean Architecture:\n  ‚Ä¢ Domain layer: Pure business logic, no framework dependencies?\n  ‚Ä¢ Application layer: Use cases orchestrating domain logic?\n  ‚Ä¢ Infrastructure: Repos/queries separate from domain?\n  ‚Ä¢ Interface layer: Controllers/LiveViews delegating to contexts?\n\nüîí Boundary Constraints:\n  ‚Ä¢ No forbidden references across boundaries?\n  ‚Ä¢ Using only public context APIs?\n  ‚Ä¢ Run: mix compile (check for boundary violations)\n\n‚úÖ Tests:\n  ‚Ä¢ All tests passing? Run: mix test\n  ‚Ä¢ Tests still follow TDD principles?\n  ‚Ä¢ Test coverage adequate for changes?\n'; fi"
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"$CLAUDE_PROJECT_DIR\" && mix precommit"
          }
        ]
      }
    ]
  }
}
